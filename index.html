<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Protocollo del Diavolo BET</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #020617;
      color: #e5e7eb;
    }
    header {
      padding: 20px 16px 10px;
      background: #020617;
      border-bottom: 1px solid #1f2937;
    }
    h1 {
      font-size: 24px;
      margin: 0 0 4px;
    }
    .sub {
      font-size: 13px;
      color: #9ca3af;
    }
    .main {
      padding: 10px 14px 80px;
      max-width: 900px;
      margin: 0 auto;
    }
    .section-title {
      margin: 20px 0 6px;
      font-size: 18px;
      font-weight: 600;
    }
    .card {
      background: #020617;
      border-radius: 16px;
      padding: 12px 14px;
      margin-bottom: 8px;
      border: 1px solid #111827;
    }
    .match-top {
      display: flex;
      justify-content: space-between;
      font-size: 14px;
      margin-bottom: 4px;
      gap: 8px;
    }
    .league {
      font-size: 11px;
      color: #9ca3af;
    }
    .tag {
      display: inline-block;
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: #111827;
      margin-right: 4px;
    }
    .odd-line {
      font-size: 13px;
      margin-top: 4px;
    }
    .chips {
      margin-top: 4px;
      font-size: 11px;
      color: #9ca3af;
    }
    .chips span {
      margin-right: 8px;
    }
    .layout-2 {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }
    @media (min-width: 720px) {
      .layout-2 {
        grid-template-columns: 1fr 1fr;
      }
    }
    .protocol-section {
      margin-top: 24px;
      padding: 14px;
      border-radius: 18px;
      background: radial-gradient(circle at top, #0f172a, #020617 55%);
      border: 1px solid #1f2937;
    }
    .protocol-title {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    .protocol-col-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }
    @media (min-width: 720px) {
      .protocol-col-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    .protocol-col {
      background: #020617;
      border-radius: 14px;
      padding: 10px;
      border: 1px dashed #1f2937;
      font-size: 12px;
    }
    .protocol-col h4 {
      margin: 0 0 4px;
      font-size: 13px;
    }
    .protocol-play {
      margin-bottom: 6px;
    }
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 999px;
      padding: 6px 14px;
      border: none;
      font-size: 13px;
      cursor: pointer;
      margin-top: 6px;
    }
    .btn-small {
      background: #111827;
      color: #e5e7eb;
      font-size: 11px;
      padding: 4px 10px;
    }
    .btn-telegram-link {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 999px;
      background: #0f172a;
      color: #e5e7eb;
      text-decoration: none;
      font-size: 13px;
      border: 1px solid #1f2937;
    }
    .toast {
      position: fixed;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      background: #111827;
      color: #e5e7eb;
      font-size: 12px;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid #1f2937;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease;
      z-index: 50;
    }
    .toast.show {
      opacity: 1;
    }
  </style>
</head>
<body>
  <header>
    <h1>ðŸ“± Protocollo del Diavolo BET</h1>
    <div class="sub">
      Ricevi la lista â†’ ricevi lo ZIP â†’ lo carichi su Vercel â†’ il sito si aggiorna. Niente PC.
    </div>
  </header>

  <main class="main">
    <!-- LINK BOT TELEGRAM -->
    <div style="margin-top: 6px; margin-bottom: 10px; display:flex; justify-content:space-between; align-items:center; gap:8px; flex-wrap:wrap;">
      <a class="btn-telegram-link" href="https://t.me/+KdKOgdp-tI1lODc8" target="_blank" rel="noopener">
        ðŸ¤– Apri bot / canale Telegram
      </a>
      <button class="btn btn-small" onclick="testTelegram()">Test invio al bot</button>
    </div>

    <!-- LISTE -->
    <h2 class="section-title">Over 1.5 Finale â€“ 12/12/2025</h2>
    <section class="layout-2" id="list-over15"></section>

    <h2 class="section-title">Over 0.5 HT â€“ 12/12/2025</h2>
    <section class="layout-2" id="list-ht"></section>

    <h2 class="section-title">Over 3.5 â€“ 12/12/2025</h2>
    <section class="layout-2" id="list-over35"></section>

    <!-- PROTOCOLLO DEL DIAVOLO AUTOMATICO -->
    <section class="protocol-section">
      <div class="protocol-title">
        <div>
          <div style="font-size:14px; font-weight:600;">ðŸ˜ˆ Protocollo del Diavolo â€“ Giocate del giorno</div>
          <div style="font-size:11px; color:#9ca3af;">Scelte automatiche dal sistema sulle tre liste.</div>
        </div>
        <button class="btn btn-small" onclick="sendAllProtocolToTelegram()">Invia tutte al bot</button>
      </div>

      <div class="protocol-col-grid">
        <div class="protocol-col" id="col-over15"></div>
        <div class="protocol-col" id="col-ht"></div>
        <div class="protocol-col" id="col-over35"></div>
      </div>
    </section>

    <div id="toast" class="toast">Messaggio inviato</div>
  </main>

  <script>
    // === DATI LISTE ===
    const listOver15 = [
      { match: "Real Sociedad - Girona", time: "21:00", league: "La Liga â€¢ Spagna", segno: "Over 1.5", quota: 1.25, prono: 76.19, genius: 83.93 },
      { match: "Den Bosch - VVV Venlo", time: "20:00", league: "Eerste Divisie â€¢ Olanda", segno: "Over 1.5", quota: 1.17, prono: 81.04, genius: 91.95 },
      { match: "PAU - Amiens", time: "20:00", league: "Ligue 2 â€¢ Francia", segno: "Over 1.5", quota: 1.20, prono: 78.3, genius: 82.9 },
      { match: "FC Liefering - Rapid Wien II", time: "18:00", league: "2. Liga â€¢ Austria", segno: "Over 1.5", quota: 1.17, prono: 79.37, genius: 94.97 },
      { match: "Maccabi Kabilio Jaffa - Hapoel Kfar Shalem", time: "14:00", league: "Liga Leumit â€¢ Israele", segno: "Over 1.5", quota: 1.17, prono: 79.37, genius: 90.74 },
      { match: "Kafr Qasim - Ironi Modi'in", time: "14:00", league: "Liga Leumit â€¢ Israele", segno: "Over 1.5", quota: 1.25, prono: 75, genius: 88.89 },
      { match: "Maccabi Petah Tikva - Hapoel Rishon LeZion", time: "14:00", league: "Liga Leumit â€¢ Israele", segno: "Over 1.5", quota: 1.22, prono: 76.63, genius: 81.4 },
    ];

    const listHT = [
      { match: "Coleraine FC - Bangor", time: "20:45", league: "Premiership â€¢ Northern Ireland", segno: "Over 0.5 HT", quota: 1.22, prono: 76.63 },
      { match: "De Graafschap - Roda", time: "20:00", league: "Eerste Divisie â€¢ Olanda", segno: "Over 0.5 HT", quota: 1.22, prono: 76.63 },
      { match: "Den Bosch - VVV Venlo", time: "20:00", league: "Eerste Divisie â€¢ Olanda", segno: "Over 0.5 HT", quota: 1.25, prono: 75 },
      { match: "Jong AZ - Jong Utrecht", time: "20:00", league: "Eerste Divisie â€¢ Olanda", segno: "Over 0.5 HT", quota: 1.25, prono: 75 },
      { match: "Jong PSV - Almere City FC", time: "20:00", league: "Eerste Divisie â€¢ Olanda", segno: "Over 0.5 HT", quota: 1.18, prono: 79.23 },
      { match: "MVV - Jong Ajax", time: "20:00", league: "Eerste Divisie â€¢ Olanda", segno: "Over 0.5 HT", quota: 1.25, prono: 75 },
      { match: "FC OSS - ADO Den Haag", time: "20:00", league: "Eerste Divisie â€¢ Olanda", segno: "Over 0.5 HT", quota: 1.22, prono: 76.63 },
    ];

    const listOver35 = [
      { match: "Den Bosch - VVV Venlo", time: "20:00", league: "Eerste Divisie â€¢ Olanda", segno: "Over 3.5", quota: 2.25, prono: 41.1, genius: 58.78 },
      { match: "FC Liefering - Rapid Wien II", time: "18:00", league: "2. Liga â€¢ Austria", segno: "Over 3.5", quota: 2.50, prono: 37.5, genius: 68.71 },
      { match: "Maccabi Kabilio Jaffa - Hapoel Kfar Shalem", time: "14:00", league: "Liga Leumit â€¢ Israele", segno: "Over 3.5", quota: 2.25, prono: 41.1, genius: 55.26 },
      { match: "Kafr Qasim - Ironi Modi'in", time: "14:00", league: "Liga Leumit â€¢ Israele", segno: "Over 3.5", quota: 3.00, prono: 31.19, genius: 50.92 },
      { match: "Ludogorets II - Hebar 1918", time: "13:00", league: "Second League â€¢ Bulgaria", segno: "Over 3.5", quota: 3.75, prono: 25, genius: 56.07 },
    ];

    function renderList(list, containerId) {
      const root = document.getElementById(containerId);
      root.innerHTML = "";
      list.forEach(item => {
        const div = document.createElement("article");
        div.className = "card";
        div.innerHTML = `
          <div class="match-top">
            <div>${item.match}</div>
            <div>${item.time}</div>
          </div>
          <div class="league">${item.league}</div>
          <div class="odd-line">
            <span class="tag">${item.segno}</span>
            <span class="tag">Quota ${item.quota}</span>
          </div>
          <div class="chips">
            ${item.prono ? `<span>Prono: ${item.prono}%</span>` : ""}
            ${item.genius ? `<span>Genius: ${item.genius}%</span>` : ""}
          </div>
        `;
        root.appendChild(div);
      });
    }

    renderList(listOver15, "list-over15");
    renderList(listHT, "list-ht");
    renderList(listOver35, "list-over35");

    // === PROTOCOLLO DEL DIAVOLO (2 giocate per lista) ===
    const protocolPlays = {
      over15: [
        { match: "FC Liefering - Rapid Wien II", giocata: "Over 1.5 + Gol", nota: "Quota bassa ma match aperto" },
        { match: "Maccabi Kabilio Jaffa - Hapoel Kfar Shalem", giocata: "Multigol 2â€“4", nota: "Trend offensivo equilibrato" },
      ],
      ht: [
        { match: "Coleraine FC - Bangor", giocata: "Over 0.5 HT + Over 1.5 finale", nota: "Buona spinta offensiva" },
        { match: "De Graafschap - Roda", giocata: "Multigol 1â€“2 HT", nota: "Primo tempo spesso vivo" },
      ],
      over35: [
        { match: "FC Liefering - Rapid Wien II", giocata: "Over 3.5 + Gol", nota: "Partita da ritmo alto" },
        { match: "Den Bosch - VVV Venlo", giocata: "Multigol 3â€“5", nota: "Difese leggere, attacchi propositivi" },
      ],
    };

    function renderProtocolColumn(key, title, elementId) {
      const col = document.getElementById(elementId);
      const plays = protocolPlays[key];
      col.innerHTML = `<h4>${title}</h4>`;
      plays.forEach((p, index) => {
        col.innerHTML += `
          <div class="protocol-play">
            <div><strong>${p.match}</strong></div>
            <div>${p.giocata}</div>
            <div style="font-size:11px; color:#9ca3af;">${p.nota}</div>
            <button class="btn btn-small" onclick="sendProtocolPlay('${key}', ${index})">Invia al bot</button>
          </div>
        `;
      });
    }

    renderProtocolColumn("over15", "Over 1.5", "col-over15");
    renderProtocolColumn("ht", "HT", "col-ht");
    renderProtocolColumn("over35", "Over 3.5", "col-over35");

    async function sendToTelegram(text) {
      try {
        const url = "/api/send-signal?text=" + encodeURIComponent(text);
        const res = await fetch(url);
        if (!res.ok) throw new Error("HTTP error");
        showToast("Inviato al bot Telegram");
      } catch (err) {
        console.error(err);
        showToast("Errore invio (controlla TOKEN su Vercel)");
      }
    }

    function sendProtocolPlay(key, index) {
      const p = protocolPlays[key][index];
      const text = `ðŸ˜ˆ Protocollo del Diavolo\n${p.match}\nGiocata: ${p.giocata}\nNota: ${p.nota}`;
      sendToTelegram(text);
    }

    function sendAllProtocolToTelegram() {
      const all = [
        ...protocolPlays.over15,
        ...protocolPlays.ht,
        ...protocolPlays.over35,
      ];
      const text = all.map(p => `${p.match} â†’ ${p.giocata}`).join("\n");
      sendToTelegram("ðŸ˜ˆ Protocollo del Diavolo â€“ Giocate del giorno\n" + text);
    }

    function testTelegram() {
      sendToTelegram("âœ… Test collegamento API â†’ Bot/Canale Telegram (Protocollo del Diavolo BET).");
    }

    function showToast(message) {
      const toast = document.getElementById("toast");
      toast.textContent = message;
      toast.classList.add("show");
      setTimeout(() => toast.classList.remove("show"), 2000);
    }
  </script>
</body>
</html>
